<!DOCTYPE html><html><head>
<title>Star: A Stupid Archive Format</title>
<!--Generated by LaTeXML (version 0.8.3) http://dlmf.nist.gov/LaTeXML/.-->
<!--Document created on 04/05/19.-->

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="stylesheet" href="whitepaper.css" type="text/css">

<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"></head>
<body>
<div class="ltx_page_main">
<div class="ltx_page_content">
<article class="ltx_document ltx_authors_1line">
<h1 class="ltx_title ltx_title_document">Star: A Stupid Archive Format</h1>
<div class="ltx_authors">
<span class="ltx_creator ltx_role_author">
<span class="ltx_personname">Carter Brainerd 
<br class="ltx_break"><a href="mailto:0xCB@protonmail.com" title="" class="ltx_ref ltx_href">0xCB@protonmail.com</a> 
</span></span>
</div>
<div class="ltx_date ltx_role_creation">04/05/19</div>

<section id="S1" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">1 </span>Abstract</h2>

<div id="S1.p1" class="ltx_para">
<p class="ltx_p">Archiving is not something most people think about on a regular basis. The <span class="ltx_text ltx_font_typewriter">tar</span> program has been the de facto standard for archiving files for over 30 years. Tar assumes that it is always working in a strictly Unix environment, which is why we do not see tar being regularly used on Windows. In short, <span class="ltx_text ltx_font_typewriter">tar</span> is not a cross-platform archiving solution. We introduce a simpler, cross-platform archiving solution called <span class="ltx_text ltx_font_typewriter">star</span>.</p>
</div>
</section>
<section id="S2" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">2 </span>Introduction</h2>

<div id="S2.p1" class="ltx_para">
<p class="ltx_p">While the idea of <span class="ltx_text ltx_font_typewriter">tar</span> started out as a great idea, it’s evolved to include multiple different formats, flags, options, and implementations. It has gotten too complicated. The <span class="ltx_text ltx_font_typewriter">star</span> program gets rid of the extraneous flags and options. It is simple, clean, secure, and reliable. It is coded in the <a href="https://crystal-lang.org" title="" class="ltx_ref ltx_href">Crystal language</a>, so the program itself is easy to read and understand. Everything about <span class="ltx_text ltx_font_typewriter">star</span> is simple: the program, the file format, and its processes.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="S3" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">3 </span>File Specification</h2>

<div id="S3.p1" class="ltx_para">
<p class="ltx_p">The <span class="ltx_text ltx_font_typewriter">.star</span> file format is a binary file format (called a ‘starfile’).
All hexadecmal strings shown in the table are meant to be on one line.
They are separated by newlines in the table for spacing purposes.</p>
</div>
<figure id="S3.tab1" class="ltx_table">
<table class="ltx_tabular ltx_align_middle">
<tbody class="ltx_tbody">
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">Total bytes</span></td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">Byte Value</span></td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t"><span class="ltx_text ltx_font_bold">Meaning</span></td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">16</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x73\x20\x74\x20\x61\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x72\x20\x31\x00\x00…</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">s t a r 1\x00*16 (file magic)</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">8</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\xCA\xFE\xCA\xFE</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\xBA\xBE\xBA\xBE</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">Beginning of file list</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">n</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">filename{*&amp;*}filehash{:\x00:}</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">filename{*&amp;*}filehash{:\x00:}…</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">File list separated by {:\x00:}</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">8</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\xBA\xBE\xBA\xBE</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\xCA\xFE\xCA\xFE</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">End of the file list</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">24</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x53\x20\x54\x20\x41\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x52\x20\x42\x20\x45\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x47\x20\x49\x20\x4e\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x5c\x20\x5c\x20\x26\x24</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_left">Beginning of file</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left">(S T A R B E G I N \\&amp;$)</td>
</tr>
</tbody></table>
</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">n</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">file contents</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">The contents of the file</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">24</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x53\x20\x54\x20\x41\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x52\x20\x45\x20\x4e\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x44\x20\x4f\x20\x46\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x5c\x20\x5c\x20\x26\x24</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_left">End of file</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left">(S T A R E N D O F \\&amp;$)</td>
</tr>
</tbody></table>
</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_l ltx_border_r ltx_border_t">n</td>
<td class="ltx_td ltx_align_center ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">{begin file hex}{file contents}</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">{end of file hex}</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_left">Basic layout for file contents.</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left">Repeats for every file in</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_left">the archive.</td>
</tr>
</tbody></table>
</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_l ltx_border_r ltx_border_t">16</td>
<td class="ltx_td ltx_align_center ltx_border_b ltx_border_r ltx_border_t">
<table class="ltx_tabular ltx_align_middle">
<tbody><tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x65\x20\x73\x20\x74\x20</td>
</tr>
<tr class="ltx_tr">
<td class="ltx_td ltx_align_center">\x61\x20\x72\x00\x00…</td>
</tr>
</tbody></table>
</td>
<td class="ltx_td ltx_align_left ltx_border_b ltx_border_r ltx_border_t">End of star file</td>
</tr>
</tbody>
</table>
</figure>
<div class="ltx_pagination ltx_role_newpage"></div>
</section>
<section id="S4" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">4 </span>Simple</h2>

<div id="S4.p1" class="ltx_para">
<p class="ltx_p">For <span class="ltx_text ltx_font_typewriter">star</span>, simplicity is the name of the game. The command-line program uses a task-style syntax (eg. <span class="ltx_text ltx_font_typewriter">star extract --verbose myfile.star</span>) instead of <span class="ltx_text ltx_font_typewriter">tar</span>’s many flags and flag combinations. <span class="ltx_text ltx_font_typewriter">star</span> sticks to the idea of “if there is nothing to say, don’t say it.” There is never any nonsense clogging up your terminal window (unless you turn on verbose mode).</p>
</div>
<div id="S4.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">Besides the command-line program, the file format is dead simple too. There are no headers, file metadata, permissions, or OS-level information stored in the archive. This simplicity is what allows <span class="ltx_text ltx_font_typewriter">star</span> to be a truly cross-platform archiving solution.</p>
</div>
</section>
<section id="S5" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">5 </span>Compatible</h2>

<div id="S5.p1" class="ltx_para">
<p class="ltx_p">The essence of <span class="ltx_text ltx_font_typewriter">star</span> is cross-platform compatibility. The file format intentionally leaves out OS specific file information information to preserve cross-compatibility. The original program is written in the Crystal programming language, so it can be compiled for <a href="https://crystal-lang.org/reference/syntax_and_semantics/cross-compilation.html" title="" class="ltx_ref ltx_href">nearly every operating system</a>.</p>
</div>
<div id="S5.p2" class="ltx_para ltx_align_left">
<p class="ltx_p">This file format simplicity is especially important for embedded devices that don’t have file systems in place. Since the starfile only contains the file contents, filesystem-less systems are able to easily handle the files. Not only are starfiles easy to handle, they also do not necessarily need to be extracted to read the combined files.</p>
</div>
</section>
<section id="S6" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">6 </span>Security</h2>

<div id="S6.p1" class="ltx_para">
<p class="ltx_p">Every starfile has basic tamper and data-corruption security built in. Each entry in the file list contains a SHA-256 hash of that file’s contents. Star goes through every file and checks the hash in the file list with the newly calculated hash of the contents of the file. If the program encounters a mismatch, it stops the extraction and warns the user.</p>
</div>
<div class="ltx_pagination ltx_role_newpage"></div>
<section id="S6.SS1" class="ltx_subsection">
<h3 class="ltx_title ltx_title_subsection">
<span class="ltx_tag ltx_tag_subsection">6.1 </span>Security oversights</h3>

<div id="S6.SS1.p1" class="ltx_para">
<p class="ltx_p">While the program does check for hash mismatches, an attacker can change the file contents as well as the hash in the file list. This can be avoided by including a <span class="ltx_text ltx_font_typewriter">sha256sum</span> of the starfile and comparing the hash of the intended file and the hash of the downloaded data.</p>
</div>
</section>
</section>
<section id="S7" class="ltx_section">
<h2 class="ltx_title ltx_title_section">
<span class="ltx_tag ltx_tag_section">7 </span>Conclusion</h2>

<div id="S7.p1" class="ltx_para">
<p class="ltx_p">We have introduced a new and modern archiving file format. The program does not store any OS-specific metadata or permissions, so they can be transferred across operating systems without any trouble. This format also can easily be used by machines without a dedicated file system because the full contents of each file are included in the archive, so they can be read and parsed without writing anything to the disk.</p>
</div>
</section>
</article>
</div>
<footer class="ltx_page_footer">
<div class="ltx_page_logo">Generated  by <a href="http://dlmf.nist.gov/LaTeXML/">LaTeXML <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAOCAYAAAD5YeaVAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9wKExQZLWTEaOUAAAAddEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIFRoZSBHSU1Q72QlbgAAAdpJREFUKM9tkL+L2nAARz9fPZNCKFapUn8kyI0e4iRHSR1Kb8ng0lJw6FYHFwv2LwhOpcWxTjeUunYqOmqd6hEoRDhtDWdA8ApRYsSUCDHNt5ul13vz4w0vWCgUnnEc975arX6ORqN3VqtVZbfbTQC4uEHANM3jSqXymFI6yWazP2KxWAXAL9zCUa1Wy2tXVxheKA9YNoR8Pt+aTqe4FVVVvz05O6MBhqUIBGk8Hn8HAOVy+T+XLJfLS4ZhTiRJgqIoVBRFIoric47jPnmeB1mW/9rr9ZpSSn3Lsmir1fJZlqWlUonKsvwWwD8ymc/nXwVBeLjf7xEKhdBut9Hr9WgmkyGEkJwsy5eHG5vN5g0AKIoCAEgkEkin0wQAfN9/cXPdheu6P33fBwB4ngcAcByHJpPJl+fn54mD3Gg0NrquXxeLRQAAwzAYj8cwTZPwPH9/sVg8PXweDAauqqr2cDjEer1GJBLBZDJBs9mE4zjwfZ85lAGg2+06hmGgXq+j3+/DsixYlgVN03a9Xu8jgCNCyIegIAgx13Vfd7vdu+FweG8YRkjXdWy329+dTgeSJD3ieZ7RNO0VAXAPwDEAO5VKndi2fWrb9jWl9Esul6PZbDY9Go1OZ7PZ9z/lyuD3OozU2wAAAABJRU5ErkJggg==" alt="[LOGO]"></a>
</div></footer>
</div>


<script src="whitepaper.js" type="text/javascript"></script></body></html>